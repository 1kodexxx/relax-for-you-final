---
import "@/styles/promo-banner.css";
---

<section id="promo-banner" class="promo-banner" hidden>
  <div class="promo-banner__panel">
    <button class="promo-banner__close" type="button" aria-label="ะะฐะบัััั">ร</button>

    <div class="promo-banner__image">
      <img src="/banner.jpg" alt="Relax GOLD" loading="lazy" decoding="async" />
    </div>

    <header class="promo-banner__header">
      <p class="promo-banner__eyebrow">๐ฅ ะกะฟะตัะธะฐะปัะฝะพะต ะฟัะตะดะปะพะถะตะฝะธะต</p>
      <h2 class="promo-banner__title_text">
        ะะปั <span>ะะะจะะฅ</span> ะบะปะธะตะฝัะพะฒ <span>ะกะะะงะะก</span> ะดะตะนััะฒัะตั ะฐะบัะธั โโโ
      </h2>
    </header>

    <ul class="promo-banner__list">
      <li>
        ๐ฅ <b>Body EROTIC</b> ะฟะพ ะฑัะดะฝัะผ ั 12:00 โ 16:00 โ <span class="price-banner">5000 โฝ</span>
      </li>
      <li>๐ <b>ะกะบะธะดะบะฐ 50%</b> ะฝะฐ VIP ะฒ ะะตะฝั ะะพะถะดะตะฝะธั</li>
      <li>๐ ะัะธะฒะตะดะธ 3 ะดััะทะตะน โ ะฟะพะปััะธ ะะะกะกะะ ะฒ ะฟะพะดะฐัะพะบ</li>
    </ul>

    <div class="promo-banner__actions">
      <a href="#booking" class="promo-banner__btn" data-booking-trigger> ะะะะะกะะขะฌะกะฏ ะกะะะงะะก </a>
    </div>
  </div>
</section>

<script is:inline>
  (() => {
    const banner = document.querySelector("#promo-banner");
    const closeBtn = banner?.querySelector(".promo-banner__close");
    const gallery = document.querySelector("#gallery");

    if (!banner || !gallery) return;

    const showBanner = () => {
      banner.hidden = false;
      banner.classList.add("visible");
    };

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            showBanner();
            observer.disconnect();
          }
        });
      },
      { rootMargin: "0px 0px -15% 0px", threshold: 0.1 }
    );

    let endMarker = gallery.querySelector("[data-gallery-end]");
    if (!endMarker) {
      endMarker = document.createElement("div");
      endMarker.dataset.galleryEnd = "";
      endMarker.style.cssText = "width:100%;height:1px;";
      gallery.appendChild(endMarker);
    }

    observer.observe(endMarker);

    closeBtn?.addEventListener("click", () => {
      banner.classList.add("closing");
      setTimeout(() => banner.remove(), 300);
    });
  })();
</script>
